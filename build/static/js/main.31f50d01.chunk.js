(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,a){e.exports=a(67)},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(35),c=a.n(r),o=a(15),s=a(12),i=Object(n.createContext)(),u=Object(n.createContext)(),m=function(e){var t=e.title,a=e.icon,r=Object(n.useContext)(i),c=Object(n.useContext)(u),s=r.isAuthenticated,m=r.logout,p=r.user,d=r.loadUser,E=c.closeEditing;Object(n.useEffect)((function(){d()}),[]);var b=l.a.createElement(n.Fragment,null,l.a.createElement("li",null,"Hello ",p&&p.name),l.a.createElement("li",null,l.a.createElement("a",{onClick:function(){m(),E()},href:"#!"},l.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",l.a.createElement("span",{className:"hide-sm"},"Logout")))),f=l.a.createElement(n.Fragment,null,l.a.createElement("li",null,l.a.createElement(o.b,{to:"/login"},"Login")));return l.a.createElement("div",{className:"navbar bg-primary"},l.a.createElement("h1",null,l.a.createElement(o.b,{to:"/"},l.a.createElement("i",{className:a})," ",t)),l.a.createElement("ul",null,s?b:f))};m.defaultProps={title:"MD CONTROL",icon:"fas fa-cog"};var p=m,d=a(9),E=a(13),b=a(2),f=a(23),g=a(5),v=a.n(g),O=function(){var e=Object(n.useContext)(i),t=Object(n.useContext)(u),a=t.listPosts,r=t.posts,c=t.deletePost,o=t.editingPost,s=t.closeEditing,m=t.editing,p=t.updatePost,g=t.addPost,O=t.current,h=t.newP,y=t.newPost;function j(e,t){R({titulo:T.titulo,cat:T.cat,texto:e,id:T.id,ativo:T.ativo,img:T.img})}Object(n.useEffect)((function(){e.loadUser(),a()}),[a]);var x=function(e){return R(Object(b.a)(Object(b.a)({},T),{},Object(E.a)({},e.target.name,e.target.value)))},S=Object(n.useState)({titulo:"",cat:"",texto:"",ativo:null,img:""}),N=Object(d.a)(S,2),T=N[0],R=N[1],C=Object(n.useState)([]),k=Object(d.a)(C,2),P=k[0],w=k[1];var _=function(e){e.preventDefault(),null===O?(!function(){for(var e=new FormData,t=0;t<P.selectedFile.length;t++)e.append("file",P.selectedFile[t]);v.a.post("/upload",e,{}).then((function(e){console.log(e.statusText)})).catch((function(e){console.log("Upload falhou!!!")}))}(),g(T),R({titulo:"",cat:"",texto:"",ativo:null,file:"",img:""})):(p(T),R({titulo:"",cat:"",texto:"",ativo:null,img:""}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},!1===m&&l.a.createElement("ul",{style:{padding:15}},l.a.createElement("li",null,l.a.createElement("button",{className:"btn btn-dark",onClick:y},"Add Post"))),!0===m&&l.a.createElement("form",{onSubmit:_},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Titulo"),l.a.createElement("br",null),l.a.createElement("input",{value:T.titulo,name:"titulo",onChange:x,className:"p"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Categoria"),l.a.createElement("br",null),l.a.createElement("input",{value:T.cat,name:"cat",onChange:x,className:"p"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Imagem"),l.a.createElement("br",null),l.a.createElement("input",{value:T.img,name:"img",onChange:x,className:"p"})),l.a.createElement("div",{className:"form-group",style:{maxWidth:"190px"}},l.a.createElement("label",{className:"labels"},"Status:"),l.a.createElement("select",{name:"ativo",onChange:x,className:"p"},!0===T.ativo?l.a.createElement("option",{value:"true"},"Ativo"):l.a.createElement("option",{value:"false"},"Inativo"),!0===T.ativo?l.a.createElement("option",{value:"false"},"Inativo"):l.a.createElement("option",{value:"true"},"Ativo"))),l.a.createElement(f.a,{initialValue:T.texto,apiKey:"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio",init:{height:500,menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","code","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor |              alignleft aligncenter alignright alignjustify |              bullist numlist outdent indent | removeformat | help | code | codesample"},onEditorChange:j}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-success",type:"submit"},"Salvar"),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){s(),R({titulo:"",cat:"",texto:"",ativo:null,img:""})}},"Fechar")),!0===h&&l.a.createElement("form",{onSubmit:_},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Titulo"),l.a.createElement("br",null),l.a.createElement("input",{value:T.titulo,name:"titulo",onChange:x,className:"p"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Categoria"),l.a.createElement("br",null),l.a.createElement("input",{value:T.cat,name:"cat",onChange:x,className:"p"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"labels"},"Imagem Principal"),l.a.createElement("br",null),l.a.createElement("input",{type:"file",name:"file",multiple:!0,className:"p",onChange:function(e){var t=e.target.files;w({selectedFile:t,loaded:0}),R(Object(b.a)(Object(b.a)({},T),{},Object(E.a)({},e.target.name,e.target.value)))}})),l.a.createElement("div",{className:"form-group",style:{maxWidth:"190px"}},l.a.createElement("label",{className:"labels"},"Status:"),l.a.createElement("select",{name:"status",onChange:x,className:"p"},l.a.createElement("option",{value:"TRUE"},"Ativo"),l.a.createElement("option",{value:"FALSE"},"Inativo"))),l.a.createElement(f.a,{initialValue:T.texto,apiKey:"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio",init:{height:500,menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","code","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor |              alignleft aligncenter alignright alignjustify |              bullist numlist outdent indent | removeformat | help | code | codesample"},onEditorChange:j}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-success",type:"submit"},"Salvar"),l.a.createElement("button",{className:"btn btn-danger",onClick:s},"Fechar"))),l.a.createElement("table",{className:"highlight responsive-table"},!1===m&&!h&&l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Titulo"),l.a.createElement("th",null,"Categoria"),l.a.createElement("th",null,"Estado"),l.a.createElement("th",{className:"text-center"},"Actions"))),l.a.createElement("tbody",null,!m&&!h&&r.map((function(e){return l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,e.titulo),l.a.createElement("td",null,e.cat),l.a.createElement("td",{className:"text-center"},!0===e.ativo&&l.a.createElement("i",{className:"fa fa-lightbulb fa-2x",style:{color:"green"}})||!1===e.ativo&&l.a.createElement("i",{className:"fa fa-lightbulb fa-2x",style:{color:"red"}})),l.a.createElement("td",{className:"text-center"},l.a.createElement("button",{className:"btn btn-primary p",onClick:function(){return t=e._id,a=e.titulo,n=e.texto,l=e.cat,r=e.ativo,c=e.img,R({id:t,titulo:a,texto:n,cat:l,ativo:r,img:c}),void o({id:t,titulo:a,texto:n,cat:l,ativo:r,img:c});var t,a,n,l,r,c}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("button",{className:"btn btn-danger p",onClick:function(){return c(e._id)}},l.a.createElement("i",{className:"fa fa-trash-alt"}))))})))))},h=function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"About This App"),l.a.createElement("p",{className:"my-1"},"This is a full stack React app for keeping contacts"),l.a.createElement("p",{className:"bg-dark p"},l.a.createElement("strong",null,"Version: ")," 1.0.0"))},y=Object(n.createContext)(),j=function(e){var t=Object(n.useContext)(y),a=Object(n.useContext)(i),r=t.setAlert,c=a.login,o=a.error,s=a.clearErrors,u=a.isAuthenticated;Object(n.useEffect)((function(){u&&e.history.push("/"),"Invalid Credentials"===o&&(r(o,"danger"),s())}),[o,u,e.history]);var m=Object(n.useState)({email:"",password:""}),p=Object(d.a)(m,2),f=p[0],g=p[1],v=f.email,O=f.password,h=function(e){return g(Object(b.a)(Object(b.a)({},f),{},Object(E.a)({},e.target.name,e.target.value)))};return l.a.createElement("div",{className:"form-container"},l.a.createElement("h1",null,"Account ",l.a.createElement("span",{className:"text-primary"},"Login")),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===v||""===O?r("Please fill in all fields","danger"):c({email:v,password:O})}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email Address"),l.a.createElement("input",{id:"email",type:"email",name:"email",value:v,onChange:h,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{id:"password",type:"password",name:"password",value:O,onChange:h,required:!0})),l.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})))},x=function(){var e=Object(n.useContext)(y);return e.alerts.length>0&&e.alerts.map((function(e){return l.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},l.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))},S=a(38),N=function(e){var t=e.component,a=Object(S.a)(e,["component"]),r=Object(n.useContext)(i),c=r.isAuthenticated,o=r.loading;return l.a.createElement(s.b,Object.assign({},a,{render:function(e){return c||o?l.a.createElement(t,e):l.a.createElement(s.a,{to:"/login"})}}))},T=a(4),R=a.n(T),C=a(11),k=a(19),P=function(e,t){switch(t.type){case"LIST_POSTS":return Object(b.a)(Object(b.a)({},e),{},{posts:t.payload,loading:!1});case"ADD_POST":return Object(b.a)(Object(b.a)({},e),{},{posts:[t.payload].concat(Object(k.a)(e.posts)),loading:!1,newP:!1});case"POSTS_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:t.payload});case"DELETE_POST":return Object(b.a)(Object(b.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload})),loading:!1});case"EDITION_MODE":return Object(b.a)(Object(b.a)({},e),{},{editing:!0,current:t.payload});case"CLOSE_POSTS":return Object(b.a)(Object(b.a)({},e),{},{editing:!1,newP:!1,current:null});case"UPDATE_POST":return Object(b.a)(Object(b.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload.id?t.payload:e})),loading:!1,current:null,editing:!1});case"SET_CURRENT":return Object(b.a)(Object(b.a)({},e),{},{current:t.payload});case"POST_NEW":return Object(b.a)(Object(b.a)({},e),{},{newP:!0,current:null});default:return e}},w=function(e){var t=Object(n.useReducer)(P,{loading:!0,posts:[],error:null,editing:!1,current:null,newP:!1}),a=Object(d.a)(t,2),r=a[0],c=a[1],o=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("/api/blog");case 3:t=e.sent,c({type:"LIST_POSTS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"POSTS_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(C.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("/api/blog/".concat(t));case 3:c({type:"DELETE_POST",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"POSTS_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(C.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,v.a.post("/api/blog",t,a);case 4:n=e.sent,c({type:"ADD_POST",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"POSTS_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(C.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,v.a.put("/api/blog/".concat(t.id),t,a);case 4:n=e.sent,c({type:"UPDATE_POST",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"POSTS_ERROR",payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(u.Provider,{value:{loading:r.loading,posts:r.posts,error:r.error,editing:r.editing,current:r.current,newP:r.newP,listPosts:o,deletePost:s,editingPost:function(e){c({type:"EDITION_MODE",payload:e})},closeEditing:function(){c({type:"CLOSE_POSTS"})},updatePost:m,currentPost:function(e){c({type:"SET_CURRENT",payload:e})},addPost:i,newPost:function(){c({type:"POST_NEW"})}}},e.children)},_=function(e,t){switch(t.type){case"USER_LOADED":return Object(b.a)(Object(b.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{error:null});default:return e}},A=function(e){e?v.a.defaults.headers.common["x-auth-token"]=e:delete v.a.defaults.headers.common["x-auth-token"]},L=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},a=Object(n.useReducer)(_,t),r=Object(d.a)(a,2),c=r[0],o=r[1],s=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(localStorage.token),e.prev=1,e.next=4,v.a.get("/api/auth");case 4:t=e.sent,o({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(C.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,v.a.post("/api/users",t,a);case 4:n=e.sent,o({type:"REGISTER_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(C.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,v.a.post("/api/auth",t,a);case 4:n=e.sent,o({type:"LOGIN_SUCCESS",payload:n.data}),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(i.Provider,{value:{token:c.token,isAuthenticated:c.isAuthenticated,loading:c.loading,user:c.user,error:c.error,register:u,loadUser:s,login:m,logout:function(){return o({type:"LOGOUT"})},clearErrors:function(){return o({type:"CLEAR_ERRORS"})}}},e.children)},I=a(69),D=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(k.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},U=function(e){var t=Object(n.useReducer)(D,[]),a=Object(d.a)(t,2),r=a[0],c=a[1];return l.a.createElement(y.Provider,{value:{alerts:r,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Object(I.a)();c({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout((function(){return c({type:"REMOVE_ALERT",payload:n})}),a)}}},e.children)},F=(a(66),function(){return l.a.createElement(L,null,l.a.createElement(w,null,l.a.createElement(U,null,l.a.createElement(o.a,null,l.a.createElement(n.Fragment,null,l.a.createElement(p,null),l.a.createElement("div",{className:"container"},l.a.createElement(x,null),l.a.createElement(s.d,null,l.a.createElement(N,{exact:!0,path:"/",component:O}),l.a.createElement(s.b,{exact:!0,path:"/about",component:h}),l.a.createElement(s.b,{exact:!0,path:"/login",component:j}))))))))});c.a.render(l.a.createElement(F,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.31f50d01.chunk.js.map