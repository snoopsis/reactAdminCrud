{"ast":null,"code":"import _regeneratorRuntime from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from\"react\";import axios from\"axios\";import BlogContext from\"./BlogContext\";import BlogReducer from\"./BlogReducer\";import{LIST_POSTS,POSTS_ERROR,DELETE_POST,EDITION_MODE,CLOSE_POSTS,SET_CURRENT,UPDATE_POST,ADD_POST,POST_NEW}from\"../types\";var BlogState=function BlogState(props){var initialState={loading:true,posts:[],error:null,editing:false,current:null,newP:false};var _useReducer=useReducer(BlogReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// List Posts\nvar listPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/blog\");case 3:res=_context.sent;dispatch({type:LIST_POSTS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:POSTS_ERROR});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function listPosts(){return _ref.apply(this,arguments);};}();// Delete Post\nvar deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/api/blog/\".concat(id));case 3:dispatch({type:DELETE_POST,payload:id});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch({type:POSTS_ERROR,payload:_context2.t0.response.msg});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();// Add Post\nvar addPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(post){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context3.prev=1;_context3.next=4;return axios.post(\"/api/blog\",post,config);case 4:res=_context3.sent;dispatch({type:ADD_POST,payload:res.data});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:POSTS_ERROR,payload:_context3.t0.response.msg});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function addPost(_x2){return _ref3.apply(this,arguments);};}();// Update Post\nvar updatePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(post){var config,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context4.prev=1;_context4.next=4;return axios.put(\"/api/blog/\".concat(post.id),post,config);case 4:res=_context4.sent;dispatch({type:UPDATE_POST,payload:res.data});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatch({type:POSTS_ERROR,payload:_context4.t0.response.msg});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function updatePost(_x3){return _ref4.apply(this,arguments);};}();// Editing Mode ON\nvar editingPost=function editingPost(post){dispatch({type:EDITION_MODE,payload:post});};// Editing Mode OFF\nvar closeEditing=function closeEditing(){dispatch({type:CLOSE_POSTS});};// Set Current Post\nvar currentPost=function currentPost(post){dispatch({type:SET_CURRENT,payload:post});};// Open New Post\nvar newPost=function newPost(){dispatch({type:POST_NEW});};return/*#__PURE__*/React.createElement(BlogContext.Provider,{value:{loading:state.loading,posts:state.posts,error:state.error,editing:state.editing,current:state.current,newP:state.newP,listPosts:listPosts,deletePost:deletePost,editingPost:editingPost,closeEditing:closeEditing,updatePost:updatePost,currentPost:currentPost,addPost:addPost,newPost:newPost}},props.children);};export default BlogState;","map":{"version":3,"sources":["/home/snoopsis/nodeSites/backPortfolio/client/src/context/blog/BlogState.js"],"names":["React","useReducer","axios","BlogContext","BlogReducer","LIST_POSTS","POSTS_ERROR","DELETE_POST","EDITION_MODE","CLOSE_POSTS","SET_CURRENT","UPDATE_POST","ADD_POST","POST_NEW","BlogState","props","initialState","loading","posts","error","editing","current","newP","state","dispatch","listPosts","get","res","type","payload","data","deletePost","id","delete","response","msg","addPost","post","config","headers","updatePost","put","editingPost","closeEditing","currentPost","newPost","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport BlogContext from \"./BlogContext\";\r\nimport BlogReducer from \"./BlogReducer\";\r\nimport {\r\n  LIST_POSTS,\r\n  POSTS_ERROR,\r\n  DELETE_POST,\r\n  EDITION_MODE,\r\n  CLOSE_POSTS,\r\n  SET_CURRENT,\r\n  UPDATE_POST,\r\n  ADD_POST,\r\n  POST_NEW\r\n} from \"../types\";\r\n\r\nconst BlogState = props => {\r\n  const initialState = {\r\n    loading: true,\r\n    posts: [],\r\n    error: null,\r\n    editing: false,\r\n    current: null,\r\n    newP: false\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(BlogReducer, initialState);\r\n\r\n  // List Posts\r\n  const listPosts = async () => {\r\n    try {\r\n      const res = await axios.get(\"/api/blog\");\r\n\r\n      dispatch({\r\n        type: LIST_POSTS,\r\n        payload: res.data\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: POSTS_ERROR\r\n      });\r\n    }\r\n  };\r\n\r\n  // Delete Post\r\n  const deletePost = async id => {\r\n    try {\r\n      await axios.delete(`/api/blog/${id}`);\r\n\r\n      dispatch({\r\n        type: DELETE_POST,\r\n        payload: id\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: POSTS_ERROR,\r\n        payload: error.response.msg\r\n      });\r\n    }\r\n  };\r\n\r\n  // Add Post\r\n  const addPost = async post => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\"/api/blog\", post, config);\r\n\r\n      dispatch({\r\n        type: ADD_POST,\r\n        payload: res.data\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: POSTS_ERROR,\r\n        payload: error.response.msg\r\n      });\r\n    }\r\n  };\r\n\r\n  // Update Post\r\n  const updatePost = async post => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n    try {\r\n      const res = await axios.put(`/api/blog/${post.id}`, post, config);\r\n\r\n      dispatch({\r\n        type: UPDATE_POST,\r\n        payload: res.data\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: POSTS_ERROR,\r\n        payload: error.response.msg\r\n      });\r\n    }\r\n  };\r\n\r\n  // Editing Mode ON\r\n  const editingPost = post => {\r\n    dispatch({ type: EDITION_MODE, payload: post });\r\n  };\r\n\r\n  // Editing Mode OFF\r\n  const closeEditing = () => {\r\n    dispatch({ type: CLOSE_POSTS });\r\n  };\r\n\r\n  // Set Current Post\r\n  const currentPost = post => {\r\n    dispatch({ type: SET_CURRENT, payload: post });\r\n  };\r\n\r\n  // Open New Post\r\n  const newPost = () => {\r\n    dispatch({ type: POST_NEW });\r\n  };\r\n\r\n  return (\r\n    <BlogContext.Provider\r\n      value={{\r\n        loading: state.loading,\r\n        posts: state.posts,\r\n        error: state.error,\r\n        editing: state.editing,\r\n        current: state.current,\r\n        newP: state.newP,\r\n        listPosts,\r\n        deletePost,\r\n        editingPost,\r\n        closeEditing,\r\n        updatePost,\r\n        currentPost,\r\n        addPost,\r\n        newPost\r\n      }}\r\n    >\r\n      {props.children}\r\n    </BlogContext.Provider>\r\n  );\r\n};\r\n\r\nexport default BlogState;\r\n"]},"metadata":{},"sourceType":"module"}