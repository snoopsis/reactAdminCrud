{"ast":null,"code":"import _slicedToArray from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/snoopsis/nodeSites/backPortfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useContext,useEffect,useState}from\"react\";import AuthContext from\"../../context/auth/authContext\";import BlogContext from\"../../context/blog/BlogContext\";import{Editor}from\"@tinymce/tinymce-react\";import axios from\"axios\";var Home=function Home(){var authContext=useContext(AuthContext);var blogContext=useContext(BlogContext);var listPosts=blogContext.listPosts,posts=blogContext.posts,deletePost=blogContext.deletePost,editingPost=blogContext.editingPost,closeEditing=blogContext.closeEditing,editing=blogContext.editing,updatePost=blogContext.updatePost,addPost=blogContext.addPost,current=blogContext.current,newP=blogContext.newP,newPost=blogContext.newPost;useEffect(function(){authContext.loadUser();listPosts();// eslint-disable-next-line\n},[listPosts]);function handleEditorChange(content,editor){setPost({titulo:post.titulo,cat:post.cat,texto:content,id:post.id,ativo:post.ativo,img:post.img});}var onChange=function onChange(e){return setPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},e.target.name,e.target.value)));};var _useState=useState({titulo:\"\",cat:\"\",texto:\"\",ativo:null,img:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];function onChangeHandler(event){var files=event.target.files;setFile({selectedFile:files,loaded:0});setPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},event.target.name,event.target.value)));}function onClickHandler(){var data=new FormData();for(var x=0;x<file.selectedFile.length;x++){data.append(\"file\",file.selectedFile[x]);}axios.post(\"http://upload\",data,{// receive two    parameter endpoint url ,form data\n}).then(function(res){// then print response status\nconsole.log(res.statusText);}).catch(function(err){console.log(\"Upload falhou!!!\");});}function editarPost(id,titulo,texto,cat,ativo,img){setPost({id:id,titulo:titulo,texto:texto,cat:cat,ativo:ativo,img:img});editingPost({id:id,titulo:titulo,texto:texto,cat:cat,ativo:ativo,img:img});}var onSubmit=function onSubmit(e){e.preventDefault();if(current===null){onClickHandler();addPost(post);setPost({titulo:\"\",cat:\"\",texto:\"\",ativo:null,file:\"\",img:\"\"});}else{updatePost(post);setPost({titulo:\"\",cat:\"\",texto:\"\",ativo:null,img:\"\"});}};function fechar(){closeEditing();setPost({titulo:\"\",cat:\"\",texto:\"\",ativo:null,img:\"\"});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},editing===false&&/*#__PURE__*/React.createElement(\"ul\",{style:{padding:15}},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-dark\",onClick:newPost},\"Add Post\"))),editing===true&&/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Titulo\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{value:post.titulo,name:\"titulo\",onChange:onChange,className:\"p\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Categoria\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{value:post.cat,name:\"cat\",onChange:onChange,className:\"p\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Imagem\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{value:post.img,name:\"img\",onChange:onChange,className:\"p\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\",style:{maxWidth:\"190px\"}},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Status:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"ativo\",onChange:onChange,className:\"p\"},post.ativo===true?/*#__PURE__*/React.createElement(\"option\",{value:\"true\"},\"Ativo\"):/*#__PURE__*/React.createElement(\"option\",{value:\"false\"},\"Inativo\"),post.ativo===true?/*#__PURE__*/React.createElement(\"option\",{value:\"false\"},\"Inativo\"):/*#__PURE__*/React.createElement(\"option\",{value:\"true\"},\"Ativo\"))),/*#__PURE__*/React.createElement(Editor,{initialValue:post.texto,apiKey:\"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio\",init:{height:500,menubar:true,plugins:[\"advlist autolink lists link image charmap print preview anchor\",\"searchreplace visualblocks code fullscreen\",\"insertdatetime media table paste code help wordcount\",\"code\",\"codesample\"],toolbar:\"undo redo | formatselect | bold italic backcolor | \\\r\n             alignleft aligncenter alignright alignjustify | \\\r\n             bullist numlist outdent indent | removeformat | help | code | codesample\"},onEditorChange:handleEditorChange}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",type:\"submit\"},\"Salvar\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:fechar},\"Fechar\")),newP===true&&/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Titulo\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{value:post.titulo,name:\"titulo\",onChange:onChange,className:\"p\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Categoria\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{value:post.cat,name:\"cat\",onChange:onChange,className:\"p\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Imagem Principal\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"file\",multiple:true,className:\"p\",onChange:onChangeHandler})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\",style:{maxWidth:\"190px\"}},/*#__PURE__*/React.createElement(\"label\",{className:\"labels\"},\"Status:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"status\",onChange:onChange,className:\"p\"},/*#__PURE__*/React.createElement(\"option\",{value:\"TRUE\"},\"Ativo\"),/*#__PURE__*/React.createElement(\"option\",{value:\"FALSE\"},\"Inativo\"))),/*#__PURE__*/React.createElement(Editor,{initialValue:post.texto,apiKey:\"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio\",init:{height:500,menubar:true,plugins:[\"advlist autolink lists link image charmap print preview anchor\",\"searchreplace visualblocks code fullscreen\",\"insertdatetime media table paste code help wordcount\",\"code\",\"codesample\"],toolbar:\"undo redo | formatselect | bold italic backcolor | \\\r\n             alignleft aligncenter alignright alignjustify | \\\r\n             bullist numlist outdent indent | removeformat | help | code | codesample\"},onEditorChange:handleEditorChange}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",type:\"submit\"},\"Salvar\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:closeEditing},\"Fechar\"))),/*#__PURE__*/React.createElement(\"table\",{className:\"highlight responsive-table\"},editing===false&&!newP&&/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Titulo\"),/*#__PURE__*/React.createElement(\"th\",null,\"Categoria\"),/*#__PURE__*/React.createElement(\"th\",null,\"Estado\"),/*#__PURE__*/React.createElement(\"th\",{className:\"text-center\"},\"Actions\"))),/*#__PURE__*/React.createElement(\"tbody\",null,!editing&&!newP&&posts.map(function(i){return/*#__PURE__*/React.createElement(\"tr\",{key:i._id},/*#__PURE__*/React.createElement(\"td\",null,i.titulo),/*#__PURE__*/React.createElement(\"td\",null,i.cat),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},i.ativo===true&&/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-lightbulb fa-2x\",style:{color:\"green\"}})||i.ativo===false&&/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-lightbulb fa-2x\",style:{color:\"red\"}})),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary p\",onClick:function onClick(){return editarPost(i._id,i.titulo,i.texto,i.cat,i.ativo,i.img);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-edit\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger p\",onClick:function onClick(){return deletePost(i._id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash-alt\"}))));}))));};export default Home;","map":{"version":3,"sources":["/home/snoopsis/nodeSites/backPortfolio/client/src/components/pages/Home.js"],"names":["React","useContext","useEffect","useState","AuthContext","BlogContext","Editor","axios","Home","authContext","blogContext","listPosts","posts","deletePost","editingPost","closeEditing","editing","updatePost","addPost","current","newP","newPost","loadUser","handleEditorChange","content","editor","setPost","titulo","post","cat","texto","id","ativo","img","onChange","e","target","name","value","file","setFile","onChangeHandler","event","files","selectedFile","loaded","onClickHandler","data","FormData","x","length","append","then","res","console","log","statusText","catch","err","editarPost","onSubmit","preventDefault","fechar","padding","maxWidth","height","menubar","plugins","toolbar","map","i","_id","color"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport AuthContext from \"../../context/auth/authContext\";\r\nimport BlogContext from \"../../context/blog/BlogContext\";\r\nimport { Editor } from \"@tinymce/tinymce-react\";\r\nimport axios from \"axios\";\r\n\r\nconst Home = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const blogContext = useContext(BlogContext);\r\n\r\n  const {\r\n    listPosts,\r\n    posts,\r\n    deletePost,\r\n    editingPost,\r\n    closeEditing,\r\n    editing,\r\n    updatePost,\r\n    addPost,\r\n    current,\r\n    newP,\r\n    newPost\r\n  } = blogContext;\r\n\r\n  useEffect(() => {\r\n    authContext.loadUser();\r\n    listPosts();\r\n\r\n    // eslint-disable-next-line\r\n  }, [listPosts]);\r\n\r\n  function handleEditorChange(content, editor) {\r\n    setPost({\r\n      titulo: post.titulo,\r\n      cat: post.cat,\r\n      texto: content,\r\n      id: post.id,\r\n      ativo: post.ativo,\r\n      img: post.img\r\n    });\r\n  }\r\n\r\n  const onChange = e => setPost({ ...post, [e.target.name]: e.target.value });\r\n\r\n  const [post, setPost] = useState({\r\n    titulo: \"\",\r\n    cat: \"\",\r\n    texto: \"\",\r\n    ativo: null,\r\n    img: \"\"\r\n  });\r\n\r\n  const [file, setFile] = useState([]);\r\n\r\n  function onChangeHandler(event) {\r\n    var files = event.target.files;\r\n    setFile({ selectedFile: files, loaded: 0 });\r\n    setPost({ ...post, [event.target.name]: event.target.value });\r\n  }\r\n\r\n  function onClickHandler() {\r\n    const data = new FormData();\r\n    for (var x = 0; x < file.selectedFile.length; x++) {\r\n      data.append(\"file\", file.selectedFile[x]);\r\n    }\r\n    axios\r\n      .post(\"http://upload\", data, {\r\n        // receive two    parameter endpoint url ,form data\r\n      })\r\n      .then(res => {\r\n        // then print response status\r\n        console.log(res.statusText);\r\n      })\r\n      .catch(err => {\r\n        console.log(\"Upload falhou!!!\");\r\n      });\r\n  }\r\n\r\n  function editarPost(id, titulo, texto, cat, ativo, img) {\r\n    setPost({ id, titulo, texto, cat, ativo, img });\r\n    editingPost({ id, titulo, texto, cat, ativo, img });\r\n  }\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    if (current === null) {\r\n      onClickHandler();\r\n      addPost(post);\r\n      setPost({\r\n        titulo: \"\",\r\n        cat: \"\",\r\n        texto: \"\",\r\n        ativo: null,\r\n        file: \"\",\r\n        img: \"\"\r\n      });\r\n    } else {\r\n      updatePost(post);\r\n      setPost({\r\n        titulo: \"\",\r\n        cat: \"\",\r\n        texto: \"\",\r\n        ativo: null,\r\n        img: \"\"\r\n      });\r\n    }\r\n  };\r\n\r\n  function fechar() {\r\n    closeEditing();\r\n    setPost({\r\n      titulo: \"\",\r\n      cat: \"\",\r\n      texto: \"\",\r\n      ativo: null,\r\n      img: \"\"\r\n    });\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"container\">\r\n        {editing === false && (\r\n          <ul style={{ padding: 15 }}>\r\n            <li>\r\n              <button className=\"btn btn-dark\" onClick={newPost}>\r\n                Add Post\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        )}\r\n\r\n        {editing === true && (\r\n          <form onSubmit={onSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Titulo</label>\r\n              <br />\r\n              <input\r\n                value={post.titulo}\r\n                name=\"titulo\"\r\n                onChange={onChange}\r\n                className=\"p\"\r\n              ></input>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Categoria</label>\r\n              <br />\r\n              <input\r\n                value={post.cat}\r\n                name=\"cat\"\r\n                onChange={onChange}\r\n                className=\"p\"\r\n              ></input>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Imagem</label>\r\n              <br />\r\n              <input\r\n                value={post.img}\r\n                name=\"img\"\r\n                onChange={onChange}\r\n                className=\"p\"\r\n              ></input>\r\n            </div>\r\n\r\n            <div className=\"form-group\" style={{ maxWidth: \"190px\" }}>\r\n              <label className=\"labels\">Status:</label>\r\n\r\n              <select name=\"ativo\" onChange={onChange} className=\"p\">\r\n                {post.ativo === true ? (\r\n                  <option value=\"true\">Ativo</option>\r\n                ) : (\r\n                  <option value=\"false\">Inativo</option>\r\n                )}\r\n\r\n                {post.ativo === true ? (\r\n                  <option value=\"false\">Inativo</option>\r\n                ) : (\r\n                  <option value=\"true\">Ativo</option>\r\n                )}\r\n              </select>\r\n            </div>\r\n            <Editor\r\n              initialValue={post.texto}\r\n              apiKey=\"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio\"\r\n              init={{\r\n                height: 500,\r\n                menubar: true,\r\n                plugins: [\r\n                  \"advlist autolink lists link image charmap print preview anchor\",\r\n                  \"searchreplace visualblocks code fullscreen\",\r\n                  \"insertdatetime media table paste code help wordcount\",\r\n                  \"code\",\r\n                  \"codesample\"\r\n                ],\r\n                toolbar:\r\n                  \"undo redo | formatselect | bold italic backcolor | \\\r\n             alignleft aligncenter alignright alignjustify | \\\r\n             bullist numlist outdent indent | removeformat | help | code | codesample\"\r\n              }}\r\n              onEditorChange={handleEditorChange}\r\n            />\r\n            <br />\r\n            <button className=\"btn btn-success\" type=\"submit\">\r\n              Salvar\r\n            </button>\r\n            <button className=\"btn btn-danger\" onClick={fechar}>\r\n              Fechar\r\n            </button>\r\n          </form>\r\n        )}\r\n        {newP === true && (\r\n          <form onSubmit={onSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Titulo</label>\r\n              <br />\r\n              <input\r\n                value={post.titulo}\r\n                name=\"titulo\"\r\n                onChange={onChange}\r\n                className=\"p\"\r\n              ></input>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Categoria</label>\r\n              <br />\r\n              <input\r\n                value={post.cat}\r\n                name=\"cat\"\r\n                onChange={onChange}\r\n                className=\"p\"\r\n              ></input>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"labels\">Imagem Principal</label>\r\n              <br />\r\n              <input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                multiple\r\n                className=\"p\"\r\n                onChange={onChangeHandler}\r\n              ></input>\r\n            </div>\r\n            <div className=\"form-group\" style={{ maxWidth: \"190px\" }}>\r\n              <label className=\"labels\">Status:</label>\r\n\r\n              <select name=\"status\" onChange={onChange} className=\"p\">\r\n                <option value=\"TRUE\">Ativo</option>\r\n                <option value=\"FALSE\">Inativo</option>\r\n              </select>\r\n            </div>\r\n            <Editor\r\n              initialValue={post.texto}\r\n              apiKey=\"491uxmxfbtq3itnrxvxsqpwptns8wkxt6eap45r524ltapio\"\r\n              init={{\r\n                height: 500,\r\n                menubar: true,\r\n                plugins: [\r\n                  \"advlist autolink lists link image charmap print preview anchor\",\r\n                  \"searchreplace visualblocks code fullscreen\",\r\n                  \"insertdatetime media table paste code help wordcount\",\r\n                  \"code\",\r\n                  \"codesample\"\r\n                ],\r\n                toolbar:\r\n                  \"undo redo | formatselect | bold italic backcolor | \\\r\n             alignleft aligncenter alignright alignjustify | \\\r\n             bullist numlist outdent indent | removeformat | help | code | codesample\"\r\n              }}\r\n              onEditorChange={handleEditorChange}\r\n            />\r\n            <br />\r\n            <button className=\"btn btn-success\" type=\"submit\">\r\n              Salvar\r\n            </button>\r\n            <button className=\"btn btn-danger\" onClick={closeEditing}>\r\n              Fechar\r\n            </button>\r\n          </form>\r\n        )}\r\n      </div>\r\n      <table className=\"highlight responsive-table\">\r\n        {editing === false && !newP && (\r\n          <thead>\r\n            <tr>\r\n              <th>Titulo</th>\r\n              <th>Categoria</th>\r\n              <th>Estado</th>\r\n              <th className=\"text-center\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n        )}\r\n        <tbody>\r\n          {!editing &&\r\n            !newP &&\r\n            posts.map(i => (\r\n              <tr key={i._id}>\r\n                <td>{i.titulo}</td>\r\n                <td>{i.cat}</td>\r\n                <td className=\"text-center\">\r\n                  {(i.ativo === true && (\r\n                    <i\r\n                      className=\"fa fa-lightbulb fa-2x\"\r\n                      style={{ color: \"green\" }}\r\n                    ></i>\r\n                  )) ||\r\n                    (i.ativo === false && (\r\n                      <i\r\n                        className=\"fa fa-lightbulb fa-2x\"\r\n                        style={{ color: \"red\" }}\r\n                      ></i>\r\n                    ))}\r\n                </td>\r\n                <td className=\"text-center\">\r\n                  <button\r\n                    className=\"btn btn-primary p\"\r\n                    onClick={() =>\r\n                      editarPost(\r\n                        i._id,\r\n                        i.titulo,\r\n                        i.texto,\r\n                        i.cat,\r\n                        i.ativo,\r\n                        i.img\r\n                      )\r\n                    }\r\n                  >\r\n                    <i className=\"fa fa-edit\"></i>\r\n                  </button>\r\n\r\n                  <button\r\n                    className=\"btn btn-danger p\"\r\n                    onClick={() => deletePost(i._id)}\r\n                  >\r\n                    <i className=\"fa fa-trash-alt\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n        </tbody>\r\n      </table>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}